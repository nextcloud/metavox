{"version":3,"file":"scopedstorage.js","names":["ScopedStorage","scope","wrapped","persistent","GLOBAL_SCOPE_PERSISTENT","GLOBAL_SCOPE_VOLATILE","btoa","key","value","setItem","scopeKey","getItem","removeItem","Object","keys","filter","startsWith","map","bind"],"sources":["../lib/scopedstorage.ts"],"sourcesContent":["import NextcloudStorage from './storage'\n\nexport default class ScopedStorage implements NextcloudStorage {\n\n    public static GLOBAL_SCOPE_VOLATILE = 'nextcloud_vol'\n    public static GLOBAL_SCOPE_PERSISTENT = 'nextcloud_per'\n    private scope: string\n    private wrapped: Storage\n\n    constructor(scope: string, wrapped: Storage, persistent: boolean) {\n        this.scope = `${persistent ? ScopedStorage.GLOBAL_SCOPE_PERSISTENT : ScopedStorage.GLOBAL_SCOPE_VOLATILE}_${btoa(scope)}_`\n        this.wrapped = wrapped\n    }\n\n    private scopeKey(key: string) {\n        return `${this.scope}${key}`\n    }\n\n    setItem(key: string, value: string): void {\n        this.wrapped.setItem(this.scopeKey(key), value)\n    }\n\n    getItem(key: string): string | null {\n        return this.wrapped.getItem(this.scopeKey(key))\n    }\n\n    removeItem(key: string): void {\n        this.wrapped.removeItem(this.scopeKey(key))\n    }\n\n    clear(): void {\n        Object.keys(this.wrapped)\n            .filter(key => key.startsWith(this.scope))\n            .map(this.wrapped.removeItem.bind(this.wrapped))\n    }\n\n}\n"],"mappings":";;;;;;;;;;;;;;;;;IAEqBA,aAAa;EAO9B,uBAAYC,KAAa,EAAEC,OAAgB,EAAEC,UAAmB,EAAE;IAAA;IAAA;IAAA;IAC9D,IAAI,CAACF,KAAK,aAAME,UAAU,GAAGH,aAAa,CAACI,uBAAuB,GAAGJ,aAAa,CAACK,qBAAqB,cAAIC,IAAI,CAACL,KAAK,CAAC,MAAG;IAC1H,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;EAAC;IAAA;IAAA,OAED,kBAAiBK,GAAW,EAAE;MAC1B,iBAAU,IAAI,CAACN,KAAK,SAAGM,GAAG;IAC9B;EAAC;IAAA;IAAA,OAED,iBAAQA,GAAW,EAAEC,KAAa,EAAQ;MACtC,IAAI,CAACN,OAAO,CAACO,OAAO,CAAC,IAAI,CAACC,QAAQ,CAACH,GAAG,CAAC,EAAEC,KAAK,CAAC;IACnD;EAAC;IAAA;IAAA,OAED,iBAAQD,GAAW,EAAiB;MAChC,OAAO,IAAI,CAACL,OAAO,CAACS,OAAO,CAAC,IAAI,CAACD,QAAQ,CAACH,GAAG,CAAC,CAAC;IACnD;EAAC;IAAA;IAAA,OAED,oBAAWA,GAAW,EAAQ;MAC1B,IAAI,CAACL,OAAO,CAACU,UAAU,CAAC,IAAI,CAACF,QAAQ,CAACH,GAAG,CAAC,CAAC;IAC/C;EAAC;IAAA;IAAA,OAED,iBAAc;MAAA;MACVM,MAAM,CAACC,IAAI,CAAC,IAAI,CAACZ,OAAO,CAAC,CACpBa,MAAM,CAAC,UAAAR,GAAG;QAAA,OAAIA,GAAG,CAACS,UAAU,CAAC,KAAI,CAACf,KAAK,CAAC;MAAA,EAAC,CACzCgB,GAAG,CAAC,IAAI,CAACf,OAAO,CAACU,UAAU,CAACM,IAAI,CAAC,IAAI,CAAChB,OAAO,CAAC,CAAC;IACxD;EAAC;EAAA;AAAA;AAAA;AAAA,gBAhCgBF,aAAa,2BAEQ,eAAe;AAAA,gBAFpCA,aAAa,6BAGU,eAAe"}